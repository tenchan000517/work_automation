# 業務効率化・マニュアル作成プロジェクト HANDOFF

## プロジェクト概要

制作陣の業務効率化とマニュアル整備プロジェクト。
9商材・52業務を対象に、AI活用による効率化とマニュアル改善を推進。

**ガイドライン**: `docs/manual-creation-guideline.md` を参照

---

## 設計思想

### スプレッドシート中心の設計
本体はスプレッドシート+GAS。Next.jsサイトは補助（閲覧用ビュー）。

**理由**: 担当者が直接メンテナンスできる。コード変更不要。

### GASの2つの機能
- **AIプロンプト生成**: データ+プロンプト → AIに貼り付け → AI出力を使う
- **フォーマット生成**: データ+テンプレート → そのまま使える定型文

### 基本セット構成
- プロンプトシート（AIプロンプト管理）
- 設定シート（担当者名等の設定値）
- フォーム連携時: 回答シート + 原本シート

**理由**: この構成なら新商材追加時も同じパターンで対応可能。

### GASダイアログとNext.js popupのUI統一
GASダイアログとNext.jsのオレンジボタン（popup）は同じ機能・同じUIにする。

**理由**:
- 開発時に片方を見れば両方わかる
- 設計が統一され、保守が楽
- ユーザー体験が一貫する

**UI仕様**: ガイドラインの「ダイアログUI仕様」を参照

### 入力データの永続化
ダイアログで入力したデータは一時的ではなく、スプレッドシートに保存して再利用する。

**フロー:**
1. 貼り付け → 対象シートのセルに保存
2. 次回開く → セルから読み込み → フィールドに自動入力
3. 後続フローでも同じデータを参照可能

**上書き時の挙動:**
- 既にデータがある状態で新規入力 → 「上書きしますか？」アラート
- OK → 上書き保存

**除外シート（対象シート選択肢に出さない）:**
- プロンプト
- 設定
- フォームの回答1
- ヒアリングシート（原本/テンプレート）

これらはシステムシートなので、企業データ保存先として選択不可。

---

## 商材別業務一覧

| 商材 | 業務数 | 進捗 |
|------|--------|------|
| ツナゲル | 14 | 配列順0〜5を新形式に移行済み |
| バツグン | 5 | 基本情報のみ |
| HP制作 | 8 | 基本情報のみ |
| LP制作 | 5 | 基本情報のみ |
| SNS広告 | 5 | 基本情報のみ |
| PV制作 | 5 | 基本情報のみ |
| パンフ | 3 | 基本情報のみ |
| ロゴ | 3 | 基本情報のみ |
| 月刊Sing | 4 | 基本情報のみ |
| **合計** | **52** | - |

---

## 完了済み機能

### システム基盤
- Next.js 16 + TypeScript + Tailwind CSS v4
- 商材別データ分割管理（`src/lib/data/*.ts`）
- 担当者別色分け表示
- 複数入力フィールド対応（InputFieldConfig）

### ツナゲル業務フロー
- 配列順0〜5: flowSteps + 複数入力フィールド対応
- GAS連携: ヒアリングシート管理、構成案生成、撮影フォルダ作成

### GASスクリプト
- `setupSheets.js`: 初期設定（プロンプトシート・設定シート）
- `hearingSheetManager.js`: ヒアリングシート統合管理
- `transcriptToHearingSheet.js`: 文字起こし転記
- `compositionDraftGenerator.js`: 構成案生成
- `createShootingFolder.js`: 撮影フォルダ作成
- `promptDialog.js`: プロンプトダイアログ

---

## ファイル構成

```
C:\work-manual\
├── HANDOFF.md                      # このファイル
├── docs/
│   ├── manual-creation-guideline.md  # マニュアル作成ガイドライン ★重要
│   ├── gas/                        # GASスクリプト
│   │   ├── setupSheets.js          # 初期設定
│   │   ├── hearingSheetManager.js  # ヒアリングシート管理
│   │   ├── transcriptToHearingSheet.js
│   │   ├── compositionDraftGenerator.js
│   │   ├── createShootingFolder.js
│   │   └── promptDialog.js
│   ├── prompts/                    # AIプロンプト
│   └── 業務一覧/                   # 商材別業務詳細（txt）
│
├── src/
│   ├── app/                        # Next.js Pages
│   ├── components/
│   │   ├── ContentModal.tsx        # ポップアップモーダル
│   │   └── TaskCard.tsx            # 業務カード
│   └── lib/
│       ├── data.ts                 # 再エクスポート
│       └── data/                   # 商材別データ
│           ├── index.ts            # 型定義
│           ├── tsunageru.ts        # ツナゲル（モデル）
│           └── ...                 # 他8商材
│
└── public/images/                  # スクリーンショット
```

---

## 開発コマンド

```bash
npx tsc --noEmit    # TypeScriptエラーチェック（コード変更後は必ず実行）
```

---

## 新形式とは

ツナゲルで確立した業務カードの形式。詳細は `docs/manual-creation-guideline.md` 参照。

**要点:**
- `flowSteps`: 業務の手順を横並びボックスで表示
- `inputFields`: 複数入力フィールド（企業名、日時、宛先等を個別入力）
- 画像は必ずキャプション付き（`{ url, caption }`形式）
- 担当者名はハードコードせず、`defaultValue`で設定

---

## 次回セッションでやること

### 優先度高: ガイドライン定義済み・未実装の機能

ガイドライン（7章）で設計済みだが、GAS側で未実装のもの:

| 項目 | ガイドライン | 現状 |
|------|-------------|------|
| 入力データの永続化 | 7.5 | 未実装（一時的に消える） |
| 設定シートから担当者ドロップダウン | 7.2 | 未実装（ハードコード） |
| 上書き確認アラート | 7.5 | 未実装 |
| 除外シートのフィルタリング | 7.5 | 未実装 |
| GASメニュー構造統一（addXxxMenu） | 7.6 | 一部対応 |

### 優先度高: GASとNext.jsのギャップ解消

現状のGASダイアログとNext.js ContentModalでUIが完全一致していない。
ガイドライン 7.4 の仕様に揃える:

| 要素 | Next.js | GAS | 対応 |
|------|---------|-----|------|
| 複数入力フィールド | ✓ inputFields | △ 一部のみ | GAS側を統一 |
| テンプレートアコーディオン | ✓ | △ 一部のみ | GAS側を統一 |
| プレビュー表示 | ✓ | △ 一部のみ | GAS側を統一 |

### 優先度中: ツナゲル配列順6〜13の新形式移行

配列順0〜5と同様に、残りの業務を新形式に移行:
- flowSteps追加
- 複数入力フィールド対応
- 画像はキャプション付き

### 優先度低: 他商材のブラッシュアップ

ツナゲル完了後、優先度順に他商材を整備:
1. バツグン（撮影・FBフローはツナゲルと共通部分多い）
2. HP制作
3. 以降は必要に応じて

### 保留中

| 項目 | 状況 |
|------|------|
| YouTubeアップロード手順 | flowStepsに追加予定 |

---

## 関連リンク

- **制作陣業務一覧**: 元データのスプレッドシート
- **ヒアリングシート（テンプレート）**: GAS動作確認用

---

## 担当者一覧（ツナゲル）

| 担当者 | 色 | 主な業務 |
|--------|-----|---------|
| 渡邉 | グレー | 受注・立ち上げ、日程調整 |
| 河合 | ピンク | 打ち合わせ、原稿、編集 |
| 中尾文香 | 黄色 | 原稿執筆 |
| 川崎 | 水色 | 企画、撮影、FB |
| 下脇田 | 紫 | FB |
| 紺谷 | オレンジ | 応募対応 |

---

## 更新履歴

| 日付 | 内容 |
|------|------|
| 2026-01-10 | HANDOFF最適化（詳細履歴を削除、ガイドラインに移行） |
| 2026-01-10 | 複数入力フィールド対応完了 |
| 2026-01-10 | ツナゲル配列順0〜5の新形式統一 |
| 2026-01-09 | 構成案生成GAS作成 |
| 2026-01-08 | flowSteps改善、画像追加 |
| 2026-01-07 | 初期構築（Next.js、データ構造、GAS連携） |
