# HP 更新・修正・校正マニュアル

## 基本情報

| 項目 | 内容 |
|------|------|
| 商材 | HP制作 |
| タスク番号 | No.7（修正フェーズ） |
| 担当者 | 河合 |
| 使用ツール | Claude Code, GAS |
| 成果物 | 修正済みHPソースコード |
| 前工程 | No.5 HP作成 |
| 後工程 | No.8 デプロイ または クライアント確認 |

## 目的

実装後のHPに対して、以下の修正・更新を行う：

1. **カンプ差分修正** - 実装とカンプの差異を修正
2. **プレースホルダー更新** - カンプ更新後の実データ反映
3. **クライアントフィードバック対応** - 修正依頼への対応

---

## 重要: 壊さないための原則

### やってはいけないこと

- 一括で全体を再分析・再実装
- 画像解析の曖昧な結果を信じて全体修正
- 選択していない項目を変更
- 「ついでに」他の部分を修正

### 守るべきこと

- **セクション単位**で修正
- **修正対象を明確に限定**
- **解析のみ**で差分確認してから修正
- 不安な場合は**テキストのみ**に限定

---

## GASメニュー構成

```
5.🔄 更新・修正・校正
├── 🔍 カンプ差分確認・修正    ← セクション単位の差分検出・修正
└── 📝 プレースホルダー更新    ← テキストのみの更新
```

---

## 機能1: カンプ差分確認・修正

### 用途

- 実装後にカンプと比較して差異を検出
- 選択した項目のみを修正

### 操作手順

1. **GASでダイアログを開く**
   - メニュー「5.🔄 更新・修正・校正」
   - 「🔍 カンプ差分確認・修正」をクリック

2. **入力項目**

   | 項目 | 説明 | 例 |
   |------|------|-----|
   | 対象セクション | 修正したいセクション名 | HeroSection, AboutSection |
   | モード | 解析のみ or 解析+修正 | - |
   | 修正対象 | 変更する項目（複数選択可） | テキスト、色、レイアウト等 |
   | カンプ画像パス | カンプ画像のパス | C:\Users\...\1.png |
   | 実装コードパス | （任意）コードのパス | /mnt/c/client_hp/.../HeroSection.tsx |

3. **モード選択**

   | モード | 出力 | 用途 |
   |--------|------|------|
   | 🔍 解析のみ | 差分レポート | 修正前の確認 |
   | 🔧 解析+修正 | 修正コード | 実際の修正 |

4. **修正対象選択**

   | 項目 | 内容 |
   |------|------|
   | テキスト・文言 | 見出し、本文、ボタンテキスト等 |
   | 色・カラー | 背景色、文字色、ボーダー色等 |
   | レイアウト・配置 | flexbox、grid、中央寄せ等 |
   | フォント・サイズ | font-size、font-weight等 |
   | 画像・素材 | 画像パス、alt属性等 |
   | 余白・間隔 | margin、padding、gap等 |

### 重要な注意点

```
✅ 選択した項目のみ修正される
❌ 選択していない項目は絶対に変更されない
```

**推奨フロー:**
1. まず「解析のみ」で差分を確認
2. 差分内容を確認
3. 問題なければ「解析+修正」で修正

---

## 機能2: プレースホルダー更新

### 用途

- カンプが更新され、プレースホルダーが実データに置き換わった場合
- テキストのみを更新（レイアウト等は変更しない）

### 操作手順

1. **GASでダイアログを開く**
   - メニュー「5.🔄 更新・修正・校正」
   - 「📝 プレースホルダー更新」をクリック

2. **入力項目**

   | 項目 | 説明 | 例 |
   |------|------|-----|
   | 対象セクション | 更新したいセクション名 | CompanyInfo, ContactSection |
   | カンプ画像パス | 更新後のカンプ画像 | C:\Users\...\1_v2.png |
   | プレースホルダー一覧 | （任意）更新対象の一覧 | aaaa → 会社名 |

3. **プレースホルダー一覧の書き方**

   ```
   aaaa → 株式会社サンプル
   xxxx → 東京都渋谷区...
   0000-00-0000 → 03-1234-5678
   ```

   ※空欄の場合、カンプから自動検出

### 重要な注意点

```
✅ テキストのみ更新
❌ レイアウト・色・フォント等は変更されない
```

---

## よくあるシナリオ

### シナリオ1: テキストだけ違う

**状況:** 見出しのテキストがカンプと違う

**対応:**
1. 「カンプ差分確認・修正」を開く
2. 修正対象: 「テキスト・文言」のみ選択
3. モード: 解析+修正

### シナリオ2: 色が違う

**状況:** ボタンの色がカンプと違う

**対応:**
1. 「カンプ差分確認・修正」を開く
2. 修正対象: 「色・カラー」のみ選択
3. モード: まず「解析のみ」で確認 → 問題なければ「解析+修正」

### シナリオ3: カンプが更新された

**状況:** デザイナーがカンプを更新し、プレースホルダーが実データになった

**対応:**
1. 「プレースホルダー更新」を開く
2. 更新後のカンプ画像パスを入力
3. プロンプトを生成してClaude Codeで実行

### シナリオ4: 複数項目を修正したい

**状況:** テキストと色の両方を修正したい

**対応:**
1. 「カンプ差分確認・修正」を開く
2. 修正対象: 「テキスト・文言」と「色・カラー」を選択
3. モード: まず「解析のみ」で確認
4. 差分内容を確認してから「解析+修正」

### シナリオ5: 修正が怖い

**状況:** 修正で他の部分が壊れないか不安

**対応:**
1. 「テキスト・文言」のみ選択（最も安全）
2. 「解析のみ」で差分を確認
3. 差分内容が想定通りか確認
4. 問題なければ「解析+修正」

---

## トラブルシューティング

### 修正で他の部分が壊れた

**原因:** 修正対象を広く選択しすぎた

**対策:**
1. gitで変更を元に戻す
   ```bash
   git checkout -- path/to/file.tsx
   ```
2. 修正対象を「テキスト・文言」のみに限定
3. 再度修正を実行

### 画像解析の精度が低い

**原因:** 画像の解像度が低い、または複雑なデザイン

**対策:**
1. 「テキスト・文言」のみに限定（最も確実）
2. 手動でコードを修正
3. デザイナーに確認

### 差分が多すぎる

**原因:** 最初の実装がカンプと大きく異なる

**対策:**
1. セクション単位で分割して修正
2. 優先度の高い差分から対応
3. 大きな差分は手動で修正

---

## チェックリスト

### 修正前
- [ ] 修正対象のセクションを特定した
- [ ] 修正対象の項目を明確にした
- [ ] カンプ画像のパスを確認した

### 修正中
- [ ] 「解析のみ」で差分を確認した
- [ ] 差分内容が想定通りか確認した
- [ ] 選択していない項目が変更されていないか確認した

### 修正後
- [ ] ブラウザで表示を確認した
- [ ] 修正した部分がカンプと一致しているか確認した
- [ ] 他の部分が壊れていないか確認した
- [ ] ビルドエラーがないか確認した

---

## 関連マニュアル

- [05-HP作成-カンプ版.md](./05-HP作成-カンプ版.md) - カンプ版HP作成の全体フロー
- [00-overall-manual.md](./00-overall-manual.md) - HP制作全体マニュアル
