# JSON出力・原稿生成マニュアル

## 基本情報

| 項目 | 内容 |
|------|------|
| 商材 | HP制作 |
| タスク番号 | No.4 |
| 担当者 | 河合 |
| 使用ツール | スプレッドシート（ヒアリングシートのメニュー）, AI（Claude/ChatGPT） |
| 成果物 | 構成案, セットアップ指示書, 企業ディレクトリ（HANDOFF.md含む） |
| 前工程 | No.3 文字起こし・転記 |
| 後工程 | No.5 HP作成 |

## 目的

ヒアリングシートの情報をJSON形式で出力し、AIを活用してHP構成案を作成。最終的にClaude Codeでセットアップを行い、次世代セッションでHP実装を開始できる状態を作る。

## フロー概要

```
【STEP 1】JSON出力
ヒアリングシート（Part①②）
    ↓ メニュー「4.📝 構成案作成」→「📤 HP制作用JSON出力」
JSON形式で出力（Part④に自動保存）
    ↓ コピー

【STEP 2】構成案作成
    ↓ メニュー「4.📝 構成案作成」→「📋 構成案プロンプト生成」
JSON + テンプレート = プロンプト
    ↓ コピーして外部AI（Claude/ChatGPT）に貼り付け
AIが構成案を出力
    ↓ コピー

【STEP 3】Claude Code指示文生成
    ↓ メニュー「4.📝 構成案作成」→「🤖 Claude Code指示文生成」
構成案 + JSON + テンプレート選択 = セットアップ指示書
    ↓ コピー

【STEP 4】HP作成開始
    ↓ Claude Codeにセットアップ指示書を投入
企業ディレクトリ・HANDOFF作成
    ↓ 次世代セッションでHP実装開始
```

## 作業手順

### STEP 1: JSON出力

ヒアリングシートの内容（Part①基本情報 + Part②ヒアリング情報）をJSON形式で出力します。

1. **ヒアリングシート**を開く
2. メニュー「**4.📝 構成案作成**」→「**📤 HP制作用JSON出力**」をクリック

   ![JSON出力メニュー](/images/hp/menu-json-output.png)

3. ダイアログが表示される

   ![JSON出力ダイアログ](/images/hp/dialog-json-output.png)

4. **対象企業を選択**（ドロップダウン）
5. **「🔄 JSON生成」**ボタンをクリック
6. JSONが生成される
   - Part①: 基本情報（担当者、企業情報、HP要望など）
   - Part②: ヒアリング情報（ターゲット、強み、表現方向性など）
   - ⚠️ **Part③サーバー情報は含まれません**（セキュリティ対策）
   - ✅ **生成時にPart④へ自動保存されます**
7. 統計が表示される（Part①○項目、Part②○項目）
8. **「📋 コピー」**ボタンでJSONをコピー

**出力されるJSONの構造：**
```json
{
  "企業名": "株式会社○○",
  "更新日時": "2026/1/30 15:30:00",
  "Part①_基本情報": {
    "担当者情報_企業情報": { ... },
    "HPについてのご要望": { ... },
    "会社の詳細情報": { ... },
    "サービス_商品について": { ... }
  },
  "Part②_ヒアリング情報": {
    "ゴール_コンバージョン": { ... },
    "ターゲットの深掘り": { ... },
    "強みの深掘り": { ... },
    "表現の方向性": { ... },
    "SEO_キーワード設計": { ... },
    "新規作成の確認": { ... }
  }
}
```

---

### STEP 2: 構成案プロンプト生成

JSON + テンプレートで構成案作成用のプロンプトを生成し、外部AIに投げます。

1. メニュー「**4.📝 構成案作成**」→「**📋 構成案プロンプト生成**」をクリック

   ![構成案作成メニュー](/images/hp/menu-composition.png)

2. ダイアログが表示される（ステップインジケーター付き）

   ![構成案プロンプト生成ダイアログ](/images/hp/dialog-composition-prompt.png)

3. **対象企業を選択**（STEP 1と同じ企業）
4. **「🔄 プロンプト生成」**ボタンをクリック
5. プロンプトが生成される
6. **「📋 コピー」**ボタンでプロンプトをコピー

### STEP 3: 外部AIで構成案を作成

1. **Claude** または **ChatGPT** を開く
2. コピーしたプロンプトを**貼り付けて送信**
3. AIが以下の構成で構成案を出力：
   - コンセプト
   - ターゲット設定
   - ページ構成
   - デザイン方向性
   - コンテンツ案
   - SEO設計
   - 特記事項
4. AIの出力（構成案）を**全文コピー**

---

### STEP 4: Claude Code指示文生成

外部AIで作成した構成案とJSONを組み合わせて、Claude Code用の**セットアップ指示書**を生成します。

> **💡 ポイント**: この指示文は「実装指示」ではなく「セットアップ指示書」です。Claude Codeに企業ディレクトリとHANDOFFを作成させ、次世代セッションでHP実装を開始します。

1. メニュー「**4.📝 構成案作成**」→「**🤖 Claude Code指示文生成**」をクリック

   ![構成案作成メニュー](/images/hp/menu-composition.png)

2. ダイアログが表示される（4ステップインジケーター）
3. **対象企業を選択**
4. **テンプレートを選択**（5種類から選択）

   | テンプレート | 特徴 | ページ数 |
   |-------------|------|---------|
   | ストーリー型 | 社員インタビュー重視、共感採用 | 7 |
   | データ訴求型 | 数字・実績重視、グラフ活用 | 7 |
   | ビジュアル型 | 写真・動画重視、没入感 | 9 |
   | シンプル型 | ミニマルデザイン、1ページ完結 | 1 |
   | Q&A解決型 | 不安解消、FAQ重視 | 7 |

5. **構成案を貼り付け**（STEP 3でコピーした外部AIの出力）
6. **「🔄 指示文生成」**ボタンをクリック
7. **セットアップ指示書**が生成される
   - 企業ディレクトリ作成指示（`/mnt/c/hp-projects/{{企業名}}/`）
   - hearing.json（ヒアリング抽出JSON）
   - composition.md（構成案全文）
   - HANDOFF.md（進捗管理・引き継ぎ用）
8. **「📋 コピー」**ボタンで指示文をコピー

---

### STEP 5: Claude Codeでセットアップ実行

コピーした指示書をClaude Codeに投入し、企業ディレクトリをセットアップします。

1. **ターミナル**でClaude Codeを起動
2. セットアップ指示書を**貼り付けて実行**
3. Claude Codeが以下を作成：
   ```
   /mnt/c/hp-projects/{{企業名}}/
   ├── data/
   │   ├── hearing.json      # ヒアリング抽出JSON
   │   └── composition.md    # 構成案全文
   └── HANDOFF.md            # 進捗管理・引き継ぎ用
   ```
4. 完了メッセージが表示される

---

### STEP 6: 次世代セッションでHP実装開始

セットアップ完了後、新しいClaude Codeセッションを開始してHP実装を行います。

1. ターミナルで以下を実行：
   ```bash
   cd /mnt/c/hp-projects/{{企業名}}
   claude
   ```
2. Claude Codeが起動したら以下を入力：
   ```
   HANDOFFを読んで指示に従って作業を開始してください
   ```
3. Claude CodeがHANDOFF.mdを読み、HP実装を開始

---

### STEP 7: ステータス更新

1. メニュー「**4.📝 構成案作成**」→「**✏️ ステータス更新**」をクリック
2. 以下を更新：
   - **現在タスク**: 5.HP作成
   - **タスク保持者**: 河合（継続）
   - **状態**: 対応中
3. **「更新」**ボタンをクリック

## GASメニュー構成（参考）

```
4.📝 構成案作成
├── 📤 HP制作用JSON出力（生成時にPart④へ自動保存）
├── ────────────
├── 📋 構成案プロンプト生成
├── 🤖 Claude Code指示文生成
└── ✏️ ステータス更新
```

> **💡 メモ**: 旧「4.📤 JSON出力」と「5.📝 構成案作成」は「4.📝 構成案作成」に統合されました。

## 技術スタック（Claude Code用）

Claude Code指示文には以下の技術スタックが指定されています：

| 技術 | バージョン | 用途 |
|------|-----------|------|
| Next.js | 16.1.6（App Router） | フレームワーク |
| React | 19.2.3 | UIライブラリ |
| TypeScript | 5.x | 型安全なコード |
| Tailwind CSS | 4.x | スタイリング |
| Framer Motion | 12.x | アニメーション |
| Recharts | 3.x | グラフ表示 |
| Lucide React | - | アイコン |

### 開発環境の注意点

- **WSL2環境ではTurbopackが動作しない**ため、`--webpack`フラグを使用
- `npm run dev` = `next dev --webpack`

## チェックポイント

- [ ] JSON出力で正しい企業が選択されているか
- [ ] JSONにサーバー情報が含まれていないか（含まれないのが正常）
- [ ] 構成案プロンプトが正しく生成されたか
- [ ] 外部AIの出力（構成案）が十分な内容か
- [ ] 適切なテンプレートを選択したか（企業の特徴に合わせて）
- [ ] セットアップ指示書に構成案とJSONが正しく埋め込まれたか
- [ ] 企業ディレクトリが正しく作成されたか（`/mnt/c/hp-projects/{{企業名}}/`）
- [ ] HANDOFF.mdが作成されたか
- [ ] ステータスを更新したか

## トラブルシューティング

### JSONの項目が少ない場合
- ヒアリングシートのPart①②に情報が入力されているか確認
- ラベル名が正しいか確認（ラベルで検索しているため）

### 構成案が期待どおりでない場合
- ヒアリング情報が十分に入力されているか確認
- 外部AIのモデルを変更してみる（Claude 3.5 Sonnet推奨）

### セットアップがうまくいかない場合
- 企業名に特殊文字が含まれていないか確認（ディレクトリ名に使用）
- `/mnt/c/hp-projects/`ディレクトリが存在するか確認
- 既存の同名ディレクトリがある場合は上書きされるので注意

### 次世代セッションでエラーが出る場合
- HANDOFF.mdが正しく作成されているか確認
- `data/hearing.json`と`data/composition.md`が存在するか確認
- テンプレートリポジトリ（`/mnt/c/sing-hp-template/`）が存在するか確認

### Claude Codeで実装がうまくいかない場合
- HANDOFF.mdの「次にやること」セクションを確認
- 構成案が長すぎる場合は、要約版をcomposition.mdに保存してもらう
- 段階的に実装を指示する（まずコンポーネントから、など）

## 次の担当者

- **河合**（継続）→ No.5 HP作成
