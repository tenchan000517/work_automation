# 素材反映・チェックマニュアル（HP制作向け）

## 基本情報

| 項目 | 内容 |
|------|------|
| 商材 | HP制作 |
| タスク番号 | No.7 |
| 担当者 | 河合 |
| 使用ツール | GAS（更新・修正・校正メニュー）, Claude Code |
| 成果物 | 素材配置済みHP |
| 前工程 | No.6 素材撮影 |
| 後工程 | No.8 MVP確認・修正 |

---

## フロー概要

```
【撮影素材フォルダ】撮影担当がアップロード済み
    ↓
【素材選定】必要な素材を選び、本番素材フォルダに配置
    ↓
【素材反映】GASメニュー「📷 素材反映」
├── 必要素材リストJSONと本番素材フォルダパスを入力
└── Claude Code用の素材配置指示が生成される
    ↓
【Claude Code実行】生成された指示でpublic/images/に素材配置
    ↓
【素材チェック】GASメニュー「✅ 素材チェック実行」
├── 本番素材フォルダをスキャン
├── 撮影指示書と照合
└── 存在するファイルURLを自動転記
    ↓
【プレースホルダー更新】GASメニュー「📝 プレースホルダー更新 + SEO/LLMO」
    ↓
【完成】
```

---

## 1. 素材選定

撮影担当がアップロードした素材から、使用する素材を選定します。

### 手順

1. **撮影素材フォルダを確認**
   - Googleドライブの `企業名/撮影素材/` を開く
   - ページごとのサブフォルダに素材が格納されている

2. **素材を選定**
   - 撮影指示書の「素材リスト」シートを参照
   - 各素材IDに対応する最適な写真を選ぶ
   - 複数候補がある場合は最も適切なものを選択

3. **本番素材フォルダに配置**
   - 選定した素材を `企業名/本番素材/` にコピー
   - 撮影指示書の「ファイル名」列の名前にリネーム
   - destPath構造（public/images/...）に合わせて配置

---

## 2. GASメニュー: 素材反映

本番素材フォルダの内容をClaude Codeでプロジェクトに反映するための指示を生成します。

### 手順

1. ヒアリングシートを開く
2. メニュー「**5.🔄 更新・修正・校正**」→「**📷 素材反映**」をクリック
3. ダイアログが表示される
4. 以下を入力:

   | 項目 | 内容 |
   |------|------|
   | 必要素材リストJSON | HANDOFFからコピーしたJSON |
   | 本番素材フォルダパス | Googleドライブのフォルダパス |

5. 「**生成**」ボタンをクリック
6. Claude Code用の素材配置指示が生成される

### 出力される指示の例

```
以下の素材をGoogleドライブからダウンロードし、プロジェクトに配置してください。

【素材配置リスト】
1. hero_top.jpg
   - 取得元: https://drive.google.com/...
   - 配置先: public/images/hero_top.jpg

2. about_office.jpg
   - 取得元: https://drive.google.com/...
   - 配置先: public/images/about/office.jpg

...
```

### Claude Codeでの実行

1. VS CodeでWSL環境を開く
2. `claude` コマンドでClaude Codeを起動
3. 生成された指示を貼り付けて実行
4. Claude Codeが素材をダウンロードし、`public/images/` に配置

---

## 3. GASメニュー: 素材チェック実行

本番素材フォルダの内容と撮影指示書を照合し、素材の配置状況を確認します。

### 手順

1. ヒアリングシートを開く
2. メニュー「**5.🔄 更新・修正・校正**」→「**✅ 素材チェック実行**」をクリック
3. ダイアログが表示される
4. 以下を入力:

   | 項目 | 内容 |
   |------|------|
   | 撮影指示書URL | 素材フォルダ作成時に生成されたスプレッドシートURL |
   | 本番素材フォルダURL | Googleドライブのフォルダ共有URL |

5. 「**チェック実行**」ボタンをクリック

### チェック処理

1. 本番素材フォルダ内のファイルをスキャン
2. 撮影指示書の「素材リスト」シートと照合
3. 結果を自動更新:
   - **✅配置完了**: ファイルが存在する場合にチェック
   - **本番URL**: ファイルのGoogleドライブURLを転記
   - **ステータス**: 全素材が揃っているか表示

### チェック結果の確認

| ステータス | 意味 |
|------------|------|
| 完了 | 全素材が本番フォルダに配置済み |
| 一部不足 | N件の素材が未配置 |
| 未着手 | 素材フォルダが空 |

### 不足素材がある場合

1. 撮影指示書の「✅配置完了」列を確認
2. チェックが入っていない素材を特定
3. 撮影素材フォルダから選定し、本番素材フォルダに配置
4. 再度「✅ 素材チェック実行」を実行

---

## 4. プレースホルダー更新

素材配置完了後、プレースホルダー画像を本番画像に更新します。

### 手順

1. メニュー「**5.🔄 更新・修正・校正**」→「**📝 プレースホルダー更新 + SEO/LLMO**」をクリック
2. ダイアログでオプションを選択
3. Claude Code用の更新指示が生成される
4. Claude Codeで実行

### 更新内容

- `placeholder.jpg` → 本番画像パスに置換
- 画像のalt属性をSEO最適化
- OGP画像の設定
- LLMOメタデータの更新

---

## 必要素材リストJSON仕様

HANDOFFに出力される必要素材リストJSONの形式です。

### 全体構造

```json
{
  "projectName": "企業名",
  "extractedAt": "YYYY-MM-DD",
  "assets": [
    {
      "id": "hero-top",
      "fileName": "hero_top.jpg",
      "destPath": "public/images/hero_top.jpg",
      "page": "TOP",
      "usage": "TOPページHero背景",
      "shootingNote": "建設現場全景",
      "size": "1920x1080px推奨"
    }
  ],
  "summary": {
    "totalAssets": 40,
    "categories": {
      "ロゴ・OGP": 2,
      "Hero画像": 7
    }
  }
}
```

### assetsオブジェクトの各フィールド

| フィールド | 型 | 説明 |
|------------|----|----|
| id | string | 素材の一意識別子（例: hero-top） |
| fileName | string | 保存するファイル名（例: hero_top.jpg） |
| destPath | string | プロジェクト内の配置パス |
| page | string | 使用ページ（TOP, About, Service等） |
| usage | string | 使用箇所の説明 |
| shootingNote | string | 撮影時の指示・注意点 |
| size | string | 推奨画像サイズ |

### summaryオブジェクト

| フィールド | 型 | 説明 |
|------------|----|----|
| totalAssets | number | 素材の総数 |
| categories | object | カテゴリ別の素材数 |

---

## トラブルシューティング

### Q: 素材反映で画像がダウンロードできない

**A:** Googleドライブの共有設定を確認してください。
- 「リンクを知っている全員が閲覧可能」に設定
- フォルダ単位で共有設定を適用

### Q: 素材チェックでファイルが検出されない

**A:** ファイル名が撮影指示書と一致しているか確認してください。
- 大文字/小文字の違い
- 拡張子の違い（.jpg / .JPG / .jpeg）
- 余分なスペースや記号

### Q: Claude Codeで素材配置に失敗する

**A:** 以下を確認してください。
- プロジェクトのpublic/images/ディレクトリが存在するか
- WSL環境からGoogleドライブにアクセスできるか
- ファイルサイズが大きすぎないか（10MB以上は圧縮推奨）

---

## 次の工程

素材反映・チェックが完了したら「**08-MVP確認・修正**」に進みます。

**次の担当者:** 河合 → No.8 MVP確認・修正
