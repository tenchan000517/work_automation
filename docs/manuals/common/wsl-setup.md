# WSL環境構築マニュアル（完全版）

このマニュアルでは、WindowsパソコンにWSL（Windows Subsystem for Linux）環境を構築し、Claude Codeを使えるようにするまでの手順を、全くの初心者でもわかるように解説します。

---

## 目次

1. [WSLとは？なぜ必要？](#1-wslとはなぜ必要)
2. [事前確認：仮想化が有効か確認する](#2-事前確認仮想化が有効か確認する)
3. [BIOS設定：仮想化を有効にする](#3-bios設定仮想化を有効にする)
4. [WSLをインストールする](#4-wslをインストールする)
5. [VS Codeをインストールする](#5-vs-codeをインストールする)
6. [VS CodeにWSL拡張機能を追加する](#6-vs-codeにwsl拡張機能を追加する)
7. [Node.jsをインストールする](#7-nodejsをインストールする)
8. [Claude Codeをインストールする](#8-claude-codeをインストールする)
9. [動作確認](#9-動作確認)
10. [トラブルシューティング](#10-トラブルシューティング)

---

## 1. WSLとは？なぜ必要？

### WSLとは

**WSL（Windows Subsystem for Linux）** は、Windows上でLinux環境を動かすための仕組みです。

### なぜ必要なのか

- Claude Codeは**Linux環境**で動作するように設計されています
- WSLを使うことで、Windowsパソコンでも快適にClaude Codeを使えます
- 開発ツールの多くはLinux向けに作られているため、WSLがあると便利です

---

## 2. 事前確認：仮想化が有効か確認する

WSLを使うには、パソコンの「仮想化機能」が有効になっている必要があります。まず確認しましょう。

### 確認手順

1. **タスクマネージャーを開く**
   - キーボードで `Ctrl + Shift + Esc` を同時に押す
   - または、タスクバーを右クリック →「タスクマネージャー」

2. **パフォーマンスタブを開く**
   - 上部の「パフォーマンス」タブをクリック
   - 左側の「CPU」をクリック

3. **仮想化の状態を確認**
   - 右下に「仮想化」という項目があります
   - 「**有効**」と表示されていれば → [4. WSLをインストールする](#4-wslをインストールする) に進む
   - 「**無効**」と表示されていれば → [3. BIOS設定](#3-bios設定仮想化を有効にする) に進む

```
┌─────────────────────────────────────┐
│  パフォーマンス  │  CPU            │
├─────────────────────────────────────┤
│                                     │
│  基本速度: 2.90 GHz                 │
│  ソケット: 1                         │
│  コア数: 8                           │
│  論理プロセッサ数: 16                │
│                                     │
│  仮想化: 有効  ← ここを確認！        │
│                                     │
└─────────────────────────────────────┘
```

---

## 3. BIOS設定：仮想化を有効にする

> **注意**: この手順はパソコンの設定を変更するため、慎重に行ってください。不安な場合は詳しい人に相談してください。

### BIOS画面への入り方

パソコンのメーカーによって方法が異なります。

#### 方法1: Windowsの設定から入る（推奨）

1. **スタートメニュー → 設定（歯車アイコン）**

2. **「システム」→「回復」**

3. **「今すぐ再起動」をクリック**
   - 「PC の起動をカスタマイズする」の横にあるボタン

4. **「トラブルシューティング」を選択**

5. **「詳細オプション」を選択**

6. **「UEFI ファームウェアの設定」を選択**

7. **「再起動」をクリック**
   - BIOS画面が開きます

#### 方法2: 起動時にキーを押す

パソコンの電源を入れた直後に、特定のキーを連打します。

| メーカー | 押すキー |
|---------|---------|
| Dell | F2 |
| HP | F10 または Esc |
| Lenovo | F1 または F2 |
| ASUS | F2 または Del |
| Acer | F2 または Del |
| Microsoft Surface | 音量＋ボタンを押しながら電源ON |

### BIOS画面での設定

> **メーカーによって画面や項目名が異なります**

1. **仮想化設定を探す**

   以下のような名前の項目を探してください：
   - **Intel製CPU**: 「Intel Virtualization Technology」「Intel VT-x」「VT-x」
   - **AMD製CPU**: 「SVM Mode」「AMD-V」「Secure Virtual Machine」

   よくある場所：
   - 「Advanced」タブ
   - 「CPU Configuration」
   - 「Security」タブ

2. **設定を有効にする**
   - 該当項目を選択
   - 「Enabled」に変更

3. **保存して終了**
   - 「Save & Exit」を選択
   - または「F10」キーを押して保存

4. **Windowsが起動したら、[2. 事前確認](#2-事前確認仮想化が有効か確認する) に戻って確認**

---

## 4. WSLをインストールする

### 手順

1. **PowerShellを管理者権限で開く**
   - スタートメニューで「**PowerShell**」と検索
   - 「Windows PowerShell」を右クリック
   - 「**管理者として実行**」を選択

   ```
   ┌─────────────────────────────┐
   │ 🔍 PowerShell              │
   ├─────────────────────────────┤
   │ Windows PowerShell         │
   │   右クリック →              │
   │   「管理者として実行」       │
   └─────────────────────────────┘
   ```

2. **WSLをインストール**

   以下のコマンドをコピーして貼り付け、Enterキーを押します：

   ```powershell
   wsl --install
   ```

3. **インストール完了を待つ**
   - 数分かかることがあります
   - 「インストールが完了しました」と表示されるまで待ちます

4. **パソコンを再起動**

   ```powershell
   shutdown /r /t 0
   ```

   または、スタートメニューから再起動してください。

### 再起動後の設定

1. **Ubuntuが自動的に開く**
   - 黒い画面が表示されます
   - 開かない場合は、スタートメニューで「Ubuntu」を検索して開く

2. **ユーザー名を設定**

   ```
   Enter new UNIX username:
   ```

   - 半角英数字で好きな名前を入力（例: `taro`）
   - Enterキーを押す

3. **パスワードを設定**

   ```
   New password:
   ```

   - パスワードを入力（**画面には表示されません**が、入力されています）
   - Enterキーを押す

   ```
   Retype new password:
   ```

   - 同じパスワードをもう一度入力
   - Enterキーを押す

4. **完了！**

   以下のような画面が表示されれば成功です：

   ```
   taro@PC-NAME:~$
   ```

---

## 5. VS Codeをインストールする

VS Code（Visual Studio Code）は、プログラミング用のテキストエディタです。

### 手順

1. **VS Codeをダウンロード**
   - ブラウザで以下のURLを開く：
   - **https://code.visualstudio.com/**

2. **「Download for Windows」をクリック**
   - 青いボタンをクリック
   - ダウンロードが始まります

3. **インストーラーを実行**
   - ダウンロードした `VSCodeUserSetup-x64-X.XX.X.exe` をダブルクリック
   - 「使用許諾契約書に同意する」にチェック
   - 「次へ」をクリックしていく

4. **オプション設定（推奨）**

   以下にチェックを入れることをお勧めします：
   - ✅ デスクトップ上にアイコンを作成する
   - ✅ エクスプローラーのファイルコンテキストメニューに「Codeで開く」アクションを追加する
   - ✅ エクスプローラーのディレクトリコンテキストメニューに「Codeで開く」アクションを追加する
   - ✅ PATHへの追加

5. **「インストール」をクリック**

6. **完了**

---

## 6. VS CodeにWSL拡張機能を追加する

VS CodeからWSL環境を使うために、拡張機能をインストールします。

### 手順

1. **VS Codeを起動**

2. **拡張機能を開く**
   - 左サイドバーの「四角が4つ」のアイコンをクリック
   - または `Ctrl + Shift + X` を押す

   ```
   ┌──────┬─────────────────────────┐
   │  📁  │                         │
   │  🔍  │                         │
   │  🔀  │                         │
   │  🐛  │                         │
   │  ⬜⬜ │ ← これをクリック        │
   │  ⬜⬜ │                         │
   └──────┴─────────────────────────┘
   ```

3. **「WSL」で検索**
   - 検索ボックスに「WSL」と入力

4. **「WSL」をインストール**
   - 「WSL」（Microsoft製、青いアイコン）を探す
   - 「インストール」ボタンをクリック

5. **インストール完了**
   - ボタンが「アンインストール」に変わればOK

---

## 7. Node.jsをインストールする

Claude Codeを動かすためにNode.jsが必要です。nvm（Node Version Manager）を使ってインストールします。

### 手順

1. **Ubuntuを開く**
   - スタートメニューで「Ubuntu」を検索して開く
   - または、VS Codeのターミナルから実行

2. **nvmをインストール**

   以下のコマンドをコピーして貼り付け、Enterキーを押します：

   ```bash
   curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.0/install.sh | bash
   ```

3. **設定を反映**

   ```bash
   source ~/.bashrc
   ```

4. **Node.jsをインストール**

   ```bash
   nvm install 22
   ```

5. **インストール確認**

   ```bash
   node --version
   ```

   `v22.x.x` のように表示されればOK！

   ```bash
   npm --version
   ```

   バージョン番号が表示されればOK！

---

## 8. Claude Codeをインストールする

いよいよClaude Codeをインストールします。

### 手順

1. **Ubuntuを開く**（開いていない場合）

2. **Claude Codeをインストール**

   以下のコマンドを実行します：

   ```bash
   claude install
   ```

3. **インストール完了メッセージを確認**

   以下のようなメッセージが表示されます：

   ```
   ✔ Claude Code successfully installed!

     Version: 2.1.31

     Location: ~/.local/bin/claude

     Next: Run claude --help to get started

   ⚠ Setup notes:
     • Native installation exists but ~/.local/bin is not in your PATH. Run:

     echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.bashrc && source ~/.bashrc
   ```

4. **PATHを設定する（重要！）**

   上記のメッセージに書かれているコマンドを実行します：

   ```bash
   echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.bashrc && source ~/.bashrc
   ```

   > **解説**: このコマンドは「claudeコマンドを使えるようにする設定」を追加しています

5. **インストール確認**

   ```bash
   claude --version
   ```

   バージョン番号が表示されればOK！

---

## 9. 動作確認

すべてのインストールが完了したら、実際に動作確認をしましょう。

### チェックリスト

| 確認項目 | コマンド | 期待する結果 |
|---------|---------|-------------|
| WSL | `wsl --version` | バージョン情報が表示される |
| Node.js | `node --version` | `v22.x.x` と表示される |
| npm | `npm --version` | バージョン番号が表示される |
| Claude Code | `claude --version` | バージョン番号が表示される |

### Claude Codeを起動してみる

1. **作業フォルダに移動**

   ```bash
   cd /mnt/c/
   ```

2. **Claude Codeを起動**

   ```bash
   claude
   ```

3. **初回認証**
   - ブラウザが自動的に開きます
   - Anthropicアカウントでログイン
   - 認証完了後、ターミナルに戻ります

4. **終了する場合**
   - `/exit` と入力してEnter
   - または `Ctrl + C`

---

## 10. トラブルシューティング

### Q: 「wsl --install」でエラーが出る

**エラー例**: 「管理者として実行してください」

**解決策**: PowerShellを「管理者として実行」してから、もう一度コマンドを実行

---

### Q: 再起動後にUbuntuが開かない

**解決策**:
1. スタートメニューで「Ubuntu」を検索
2. 見つからない場合は、Microsoft Storeで「Ubuntu」を検索してインストール

---

### Q: 「claude install」でエラーが出る

**エラー例**: `command not found: claude`

**解決策**:
npmでインストールする従来の方法を試します：

```bash
npm install -g @anthropic-ai/claude-code
```

---

### Q: 「claude」コマンドが見つからない

**エラー例**: `command not found: claude`

**解決策**:
PATH設定を確認・再実行します：

```bash
echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc
```

それでも動かない場合：

```bash
~/.local/bin/claude --version
```

これでバージョンが表示されれば、PATHの問題です。

---

### Q: 仮想化を有効にしてもWSLがインストールできない

**確認項目**:
1. Windowsのバージョンが古くないか（Windows 10 バージョン2004以降が必要）
2. Windows Updateを最新にする

**Windowsバージョン確認方法**:
1. `Win + R` を押す
2. `winver` と入力してEnter
3. バージョン情報を確認

---

### Q: VS CodeでWSLに接続できない

**解決策**:
1. VS Codeを再起動
2. 左下の緑色の「><」アイコンをクリック
3. 「Connect to WSL」を選択

---

### Q: Node.jsのバージョンが古い

**解決策**:

```bash
nvm install 22
nvm use 22
nvm alias default 22
```

---

## インストール完了後の次のステップ

環境構築が完了したら、以下のマニュアルを参照してください：

- [Claude Code 使い方マニュアル](./claude-code-setup.md)
- [HP制作でのClaude Code活用](../hp/99-claude-code.md)

---

## 更新履歴

| 日付 | 内容 |
|------|------|
| 2026-02-05 | 初版作成（claude installコマンド対応） |
